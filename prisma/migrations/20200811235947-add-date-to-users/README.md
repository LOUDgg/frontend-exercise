# Migration `20200811235947-add-date-to-users`

This migration has been generated by Pierre Ortega at 8/11/2020, 4:59:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "new_Users" (
"id" TEXT NOT NULL,
"username" TEXT NOT NULL,
"password" TEXT NOT NULL,
"email" TEXT NOT NULL,
"created_at" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updated_at" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id"))

INSERT INTO "new_Users" ("id", "username", "password", "email") SELECT "id", "username", "password", "email" FROM "Users"

PRAGMA foreign_keys=off;
DROP TABLE "Users";;
PRAGMA foreign_keys=on

ALTER TABLE "new_Users" RENAME TO "Users";

CREATE UNIQUE INDEX "Users.username_unique" ON "Users"("username")

CREATE UNIQUE INDEX "Users.email_unique" ON "Users"("email")

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200811223934-change-index-on-upvotes..20200811235947-add-date-to-users
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -29,11 +29,14 @@
   @@id([opinion_id, user_id])
 }
 model Users {
-  id       String     @default(uuid()) @id
-  username String     @unique
-  password String
-  email    String     @unique
-  opinions Opinions[]
-  upvotes  Upvotes[]
+  id         String     @default(uuid()) @id
+  username   String     @unique
+  password   String
+  email      String     @unique
+  created_at DateTime   @default(now())
+  updated_at DateTime   @updatedAt @default(now())
+  opinions   Opinions[]
+  upvotes    Upvotes[]
+
 }
```


